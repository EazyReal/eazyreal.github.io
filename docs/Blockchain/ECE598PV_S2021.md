---
title: Note for ECE 598PV, Spring 2021
tags:
    - research
    - blockchain
    - NTU
---

# Note for ECE 598PV, Spring 2021
https://courses.grainger.illinois.edu/ece598pv/sp2021/

---

## Notations and Theorems

### Notations
- $T$ hardness of POW ($hash < T$)
- $\lambda$ mining rate
- $\beta$ fraction of adversial 
- $\beta \lambda$ adversial power
- $\alpha$ fraction of honest nodes
- $\frac{\alpha}{1+\alpha\lambda} \lambda$ honest power when forking for delay

### Theorems
- **Common Prefix**
    - hold with exponential prop if $\beta\lambda < \frac{\alpha \lambda}{1+\alpha\lambda\Delta}$
- **Chain Growth**
    - $CG \ge \frac{\alpha \lambda}{1+\alpha\lambda\Delta}$
- **Chain Quality**
    - $CQ \ge \frac{CG-\beta\lambda}{CG}$

---

# Module 1. --- Bitcoin

## 4.P2P network
- Model as P2P model
- expander graph =>gossip is O(logn)

## 5.Bitcoin system
- UTXO model (set of unspent output)
- Txs (special coinbase txs that mint coins)
- Mempool

## 6.Bitcoin safety
- Mining as a **Poisson** process 
    - rate is $\lambda$
- **Common Prefix Property**
- Private Attack is the Worst for Longest Chain Protocol
- Analysis
    - 0 Delay (Ideal)
    - Bounded Delay (i.e. Synchronous) (Forking => Honest Power Down)
        - attack success if $\beta\lambda > \frac{\alpha \lambda}{1+\alpha\lambda\Delta}$
            - $\beta$ is the fraction of adversary, $\alpha = 1-\beta$

Note:  
GST is mentioned here

## 7.Bitcoin liveness
- **Chain Growth**
    - $CG \ge \frac{\alpha \lambda}{1+\alpha\lambda\Delta}$
- **Chain Quality**
    - $CQ \ge \frac{CG-\beta\lambda}{CG}$
- Selfish Mining Attack
    - Ming and publish to replace honest block
- Maximizing Chain Quality by **Fruitchain**
    - crpytography sortition of tx blocks and proposer blocks
    - proposer blocks and proposed txs not included in 
    - CG is geranteed by hardness of $T_{prop}$
    - CQ is optimized by allowing past txs to be included

---

# Module 2. --- Scaling Bitcoin

## 8. Scaling throughput
- **Bitcoin’s throughput is security limited**
    - $throughput = \alpha\lambda B$
    - increase $B$ => increase $\Delta$
        - $\Delta \approx \frac{B}{C}+D$
    - increase $\lambda, \Delta$ => security down by theorem
- **GHOST** fork choice rule
    - counter private attack
        - private cannot be heaviest
    - but suffers from balance attack
        - analyze the second moment to get $E(|N_l − N_r|)$ by CS ineq
- **Bitcoin-NG**
    - proposer create tx blocks after elected
    - security problem: adaptive corruption => DOS attack
- **Prism 1.0**
    - ~= Fruitchain
        - no sortition
        - tx blocks POW hardness is low to get high throughput
        - proposer blocks POW is high to get high security

## 9. Scaling Latency
- **Bitcoin’s latency is security limited**
    - for $\epsilon$ security (resp. to private attack), need $k$ deep confirmation where
        - $\epsilon = e^{-ck},~c=-\ln(4\alpha\beta)$
        - the latency is thus given by $\tau=\frac{k}{\alpha\lambda}=O(\frac{1}{\lambda}\log \frac{1}{\epsilon})$
    - upperbound on error probability, https://arxiv.org/pdf/2011.14051.pdf
- **Prism**
    - voter trees (similar to boosting in ML, use LoLN)
    - $O(\frac{1}{\lambda})$ with the confirmation rule

## 10. Sharding
- key takeaway: 
    - need data availability + total ordering agreement is enough
- multiconsensus
    - Protocol
        - Node to Shard Allocation(N2S) engine(SOTA: Randhound)
        - Consensus per Shard
    - Examples
        - Elastico, rapidchain and Omniledger
        - Ethereum 2.0 and Polkadot
    - Cons
        - Shard number cannot be large to guarantee adversial count
        - Subjective to Adaptive Adversary
- uniconsensus
    - Protocol
        - Consensus is mentained by all nodes, data are stored by shards
        - DSA (Dynamic Self Allocation) algorithm
    - Examples
        - Free2Shard(Prism + Tx Blocks Sharded)
        - Aspen, Nightshade
        - Lazyledger (Client Validation + Data Availability Consensus)
        - Zilliqa partition validation
        - Polyshard use coded storage + computation
- bootstraping uniconsensus chain
    - problem, cannot trust shard majority
    - state commintment + proo of fraud
        - state roots to reduce size Merle Patricia Tries (see Ethereum Yellow paper)
        - Truebit, Arbitrum style (log tx)
- cross shard tx
    - atomic swap (timeout/abort)
    - example: Atomix, Omniledger


## 11. Extracting trust from the blockchain and scaling externally
- **Payment Channel**
    - new primitives
        - mltisig
        - hash lock
        - time lock
    - do off chain atomic swap (update secret to share new tx)
- **Side Blockchain**
